# [](#tutorial-1-hyperledger-fabric-v20---create-a-development-business-network)Tutorial 1. Hyperledger Fabric V2.0 - Create a Development Business Network

This article is a tutorial that guides you on how to create a Hyperledger Fabric v.2.0 business network on Ubuntu 16.04 LTS using the development tools that are found in the Hyperledger Fabric repository.

We will go through the process of setting up the Hyperledger Fabric prerequisites and later on we define and start the Hyperledger Fabric blockchain network between three organizations.

 - [Tutorial 1: Hyperledger Fabric V2.0 - Create a Development Business Network on Ubuntu 16.04 LTS](#tutorial-1-hyperledger-fabric-v20---create-a-development-business-network)
	 - [Recommended Reading](#recommended-reading)
-   [Setup Your Environment](#setup-your-environment)
    -   [Utility Packages](#utility-packages)
    -   [Docker](#docker)
    -   [Docker Compose](#docker-compose)
    -   [Go language](#go-language)
    -   [NodeJS](#nodejs)
-   [Retrieve Artifacts from Hyperledger Fabric Repsitories](#retrieve-artifacts-from-hyperledger-fabric-repsitories)
-   [Create Hyperledger Fabric Business Network](#create-hyperledger-fabric-business-network)
    -   [Create Project Directory](#create-project-directory)
    -   [Generate Peer and Orderer Certificates](#generate-peer-and-orderer-certificates)
    -   [Create channel.tx and the Genesis Block Using the configtxgen Tool](#create-channeltx-and-the-genesis-block-using-the-configtxgen-tool)
        -   [Creating/Modifying  `configtx.yaml`](#creatingmodifying-configtxyaml)
        -   [Executing the configtxgen Tool](#executing-the-configtxgen-tool)
-   [Start the Hyperledger Fabric blockchain network](#start-the-hyperledger-fabric-blockchain-network)
    -   [Modifying the docker-compose yaml Files](#modifying-the-docker-compose-yaml-files)
    -   [Before running docker containers](#before-running-docker-containers)
    -   [Start the docker Containers](#start-the-docker-containers)
    -   [The channel](#the-channel)
        -   [Create the channel](#create-the-channel)
        -   [Join channel](#join-channel)
        -   [Update anchor peers](#update-anchor-peers)
    -   [Prepare chaincode](#prepare-chaincode)
    -   [Install chaincode](#install-chaincode)
    -   [Instantiate chaincode](#instantiate-chaincode)
    -   [Execute tutorial scenario](#execute-tutorial-scenario)
        -   [Query for initial state of the ledger](#query-for-initial-state-of-the-ledger)
        -   [Invoke chaincode](#invoke-chaincode)
        -   [Query for the new values](#query-for-the-new-values)
-   [Summary](#summary)
-   [What is Next?](#what-is-next)
-   [References?](#references)


## [](#recommended-reading)Recommended Reading

Before you start this tutorial, you may want to get familiar with the basic concepts of Hyperledger Fabric. Official Hyperledger Fabric documentation provides a comprehensive source of information related to Hyperledger Fabric configuration, modes of operation and prerequisites. We recommend to read the following articles and use them as the reference when going through this tutorial.

-   Hyperledger Fabric Glossary -  [http://hyperledger-fabric.readthedocs.io/en/latest/glossary.html](http://hyperledger-fabric.readthedocs.io/en/latest/glossary.html)
-   Hyperledger Fabric Model -  [http://hyperledger-fabric.readthedocs.io/en/latest/fabric_model.html](http://hyperledger-fabric.readthedocs.io/en/latest/fabric_model.html)
-   Hyperledger Fabric Prerequisities -  [http://hyperledger-fabric.readthedocs.io/en/latest/prereqs.html](http://hyperledger-fabric.readthedocs.io/en/latest/prereqs.html)
-   Hyperledger Fabric Samples -  [https://github.com/hyperledger/fabric-samples](https://github.com/hyperledger/fabric-samples)
-   Building Your First Network -  [http://hyperledger-fabric.readthedocs.io/en/latest/build_network.html](http://hyperledger-fabric.readthedocs.io/en/latest/build_network.html)


## [](setup-your-environment)Setup Your Environment

### [](#utility-packages)Utility Packages

### [](#docker)Docker

Docker is a tool for deploying, executing, and managing containers. Hyperledger Fabric is by default packaged as a set of Docker images and it is ready to be run as Docker container.

To install the Docker, we can go to  [Docker website](https://docs.docker.com/install/linux/docker-ce/ubuntu/):

**SETUP THE REPOSITORY**

 1. Update the `apt` package index:
	``` 
	$ sudo apt-get update
	``` 
 2. Install packages to allow `apt` to use a repository over HTTPS:
	```
	$ sudo apt-get install \
	    apt-transport-https \
	    ca-certificates \
	    curl \
	    gnupg-agent \
	    software-properties-common
	```
 3. Add Docker’s official GPG key:
	```
	$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
	```
	Verify that you now have the key with the fingerprint `9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88`, by searching for the last 8 characters of the fingerprint.
	```
	$ sudo apt-key fingerprint 0EBFCD88
	    
	    
	pub   rsa4096 2017-02-22 [SCEA]
	      9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88
	uid           [ unknown] Docker Release (CE deb) <docker@docker.com>
	sub   rsa4096 2017-02-22 [S]
	```
 4. Use the following command to set up the  **stable**  repository. 
	 ```
	 $ sudo add-apt-repository \
	    "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
	    $(lsb_release -cs) \
	    stable"
	 ```

**INSTALL DOCKER ENGINE - COMMUNITY**
1.  Update the  `apt`  package index.
    ```
    $ sudo apt-get update
    ```
2.  Install the  _latest version_  of Docker Engine - Community and containerd, or go to the next step to install a specific version:
    ```
    $ sudo apt-get install docker-ce docker-ce-cli containerd.io
    ```
	 Adding your user to the “docker” group
	```
	$ sudo usermod -aG docker $USER
	```
	**After adding docker to current user group, please logout and login again.**
	
### [](#docker-compose)Docker Compose
Docker Compose is a tool for defining and running multi-container Docker applications. This is the case of Hyperledger Fabric default setup.

Docker Compose is typically installed as a part of your Docker installation. If not, it is necessary to install it separately. Run  `docker-compose --version`  command to find out if Docker Compose is present on your system.

To install Docker Compose on your Ubuntu 16.04 LTS system, please follow the instructions describe below or  [follow the instruction how to install the docker compose in docker website](https://docs.docker.com/compose/install/#install-compose):

 1. Run this command to download the current stable release of Docker Compose:
	```
	$ sudo curl -L "https://github.com/docker/compose/releases/download/1.25.4/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
	```
>
2. Apply executable permissions to the binary:
	```
	$ sudo chmod +x /usr/local/bin/docker-compose
	```
	Check the docker-compose version:
	```
	$ docker-compose --version
	docker-compose version 1.25.4, build 8d51620a
	```
### [](#go-language)Go language

In this tutorial, we use the Go language as the basis of chaincode in Hyperledger Fabric. For Hyperledger Fabric, the Go language version is 1.13.x is required.

To install the Go language in the system, please follow the below instructions:

 1. Download the golang file.
	```
	$ wget https://dl.google.com/go/go1.13.8.linux-amd64.tar.gz
	```
 2. Extract it in home directory.
	```
	$ tar -xvf go1.13.8.linux-amd64.tar.gz
	```
 3. Create a `gopath` directory in **HOME directory**
	```
	$ mkdir $HOME/gopath
	```
	Then we need to set the **Environment Variables** for our Golang in `~/.bashrc` file such `GOPATH`, `GOROOT`, or `GOBIN`.
	```
	$ vim ~/.bashrc
	```
	Inside `~/.bashrc` file set the following commands:
	```
	# set GOPATH and GOROOT
	export GOPATH=$HOME/gopath
	export GOROOT=$HOME/go
	export GOBIN=$HOME/go/bin
	export PATH=$PATH:/$GOROOT/bin
	```
	Then run the command `source ~/.bashrc` to build the environment variables in the **.bashrc** file

### [](nodejs)NodeJS
If you will be developing applications for Hyperledger Fabric leveraging the Hyperledger Fabric SDK for Node.js, version 8 is supported from 8.9.4 and higher. Node.js version 10 is supported from 10.15.3 and higher.
Follow the instructions below to download and install **NodeJS**.
```
$ curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -

$ sudo apt-get install -y nodejs
```

## [](retrieve-artifacts-from-hyperledger-fabric-repsitories)Retrieve Artifacts from Hyperledger Fabric Repsitories
To download and install  **Hyperledger Fabric binaries**  specific to your platform. This include downloading of  `cryptogen`,  `configtxgen`,  `configtxlator`,  `fabric-ca-client`,  `get-docker-images.sh`,  `orderer`  and  `peer`  tools and placing them into  `bin`  directory in the directory of your choice. In addition, the script will download Hyperlerdger Docker images into your local Docker registry.

Execute the following command to download Hyperledger Fabric binaries and Docker images:

````
curl -sSL https://bit.ly/2ysbOFE | bash -s -- <fabric_version> <fabric-ca_version> <thirdparty_version>

curl -sSL https://bit.ly/2ysbOFE | bash -s -- 2.0.1 1.4.6 0.4.18
````


**RUN**
```
$ curl -sSL https://bit.ly/2ysbOFE | bash -s -- 2.0.1 1.4.6 0.4.18
```

After run the command above, it will show like this:
```
Clone hyperledger/fabric-samples repo

===> Cloning hyperledger/fabric-samples repo and checkout v2.0.1
Cloning into 'fabric-samples'...
remote: Enumerating objects: 4, done.
remote: Counting objects: 100% (4/4), done.
remote: Compressing objects: 100% (4/4), done.
remote: Total 4820 (delta 0), reused 0 (delta 0), pack-reused 4816
Receiving objects: 100% (4820/4820), 1.71 MiB | 456.00 KiB/s, done.
Resolving deltas: 100% (2428/2428), done.
Checking connectivity... done.
error: pathspec 'v2.0.1' did not match any file(s) known to git.

Pull Hyperledger Fabric binaries

===> Downloading version 2.0.1 platform specific fabric binaries
===> Downloading:  https://github.com/hyperledger/fabric/releases/download/v2.0.1/hyperledger-fabric-linux-amd64-2.0.1.tar.gz
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   633  100   633    0     0   1240      0 --:--:-- --:--:-- --:--:--  1241
100 72.7M  100 72.7M    0     0   979k      0  0:01:16  0:01:16 --:--:-- 5113k
==> Done.
===> Downloading version 1.4.6 platform specific fabric-ca-client binary
===> Downloading:  https://github.com/hyperledger/fabric-ca/releases/download/v1.4.6/hyperledger-fabric-ca-linux-amd64-1.4.6.tar.gz
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   636  100   636    0     0   1363      0 --:--:-- --:--:-- --:--:--  1364
100 19.7M  100 19.7M    0     0   811k      0  0:00:24  0:00:24 --:--:-- 2225k
==> Done.

Pull Hyperledger Fabric docker images
.
.
.
===> List out hyperledger docker images
hyperledger/fabric-javaenv     2.0                 bb3837bf990f        12 days ago         505MB
hyperledger/fabric-javaenv     2.0.1               bb3837bf990f        12 days ago         505MB
hyperledger/fabric-javaenv     latest              bb3837bf990f        12 days ago         505MB
hyperledger/fabric-tools       2.0                 5c9a03790913        2 weeks ago         512MB
hyperledger/fabric-tools       2.0.1               5c9a03790913        2 weeks ago         512MB
hyperledger/fabric-tools       latest              5c9a03790913        2 weeks ago         512MB
hyperledger/fabric-peer        2.0                 5c7e5946f3dc        2 weeks ago         57.2MB
hyperledger/fabric-peer        2.0.1               5c7e5946f3dc        2 weeks ago         57.2MB
hyperledger/fabric-peer        latest              5c7e5946f3dc        2 weeks ago         57.2MB
hyperledger/fabric-orderer     2.0                 92bd220edcdd        2 weeks ago         39.7MB
hyperledger/fabric-orderer     2.0.1               92bd220edcdd        2 weeks ago         39.7MB
hyperledger/fabric-orderer     latest              92bd220edcdd        2 weeks ago         39.7MB
hyperledger/fabric-ccenv       2.0                 800087268d9b        2 weeks ago         529MB
hyperledger/fabric-ccenv       2.0.1               800087268d9b        2 weeks ago         529MB
hyperledger/fabric-ccenv       latest              800087268d9b        2 weeks ago         529MB
hyperledger/fabric-baseos      2.0                 74ff718f6f67        2 weeks ago         6.9MB
hyperledger/fabric-baseos      2.0.1               74ff718f6f67        2 weeks ago         6.9MB
hyperledger/fabric-baseos      latest              74ff718f6f67        2 weeks ago         6.9MB
hyperledger/fabric-ca          1.4                 3b96a893c1e4        3 weeks ago         150MB
hyperledger/fabric-ca          1.4.6               3b96a893c1e4        3 weeks ago         150MB
hyperledger/fabric-ca          latest              3b96a893c1e4        3 weeks ago         150MB
hyperledger/fabric-zookeeper   0.4                 ede9389347db        4 months ago        276MB
hyperledger/fabric-zookeeper   0.4.18              ede9389347db        4 months ago        276MB
hyperledger/fabric-zookeeper   latest              ede9389347db        4 months ago        276MB
hyperledger/fabric-kafka       0.4                 caaae0474ef2        4 months ago        270MB
hyperledger/fabric-kafka       0.4.18              caaae0474ef2        4 months ago        270MB
hyperledger/fabric-kafka       latest              caaae0474ef2        4 months ago        270MB
hyperledger/fabric-couchdb     0.4                 d369d4eaa0fd        4 months ago        261MB
hyperledger/fabric-couchdb     0.4.18              d369d4eaa0fd        4 months ago        261MB
hyperledger/fabric-couchdb     latest              d369d4eaa0fd        4 months ago        261MB

```

