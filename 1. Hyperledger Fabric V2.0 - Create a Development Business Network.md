# [](#tutorial-1-hyperledger-fabric-v20---create-a-development-business-network-on-ubuntu-1604-lts)Tutorial 1. Hyperledger Fabric V2.0 - Create a Development Business Network on Ubuntu 16.04 LTS

This article is a tutorial that guides you on how to create a Hyperledger Fabric v.2.0 business network on Ubuntu 16.04 LTS using the development tools that are found in the Hyperledger Fabric repository.

We will go through the process of setting up the Hyperledger Fabric prerequisites and later on we define and start the Hyperledger Fabric blockchain network between three organizations.

 - [Tutorial 1: Hyperledger Fabric V2.0 - Create a Development Business Network on Ubuntu 16.04 LTS](#tutorial-1-hyperledger-fabric-v20---create-a-development-business-network-on-ubuntu-1604-lts)
	 - [Recommended Reading](#recommended-reading)
-   [Setup Your Environment](#setup-your-environment)
    -   [Utility Packages](#utility-packages)
    -   [Docker](#docker)
    -   [Docker Compose](#docker-compose)
    -   [Go language](#go-language)
    -   [NodeJS](#nodejs)
-   [Retrieve Artifacts from Hyperledger Fabric Repsitories](#retrieve-artifacts-from-hyperledger-fabric-repsitories)
-   [Create Hyperledger Fabric Business Network](#create-hyperledger-fabric-business-network)
    -   [Create Project Directory](#create-project-directory)
    -   [Generate Peer and Orderer Certificates](#generate-peer-and-orderer-certificates)
    -   [Create channel.tx and the Genesis Block Using the configtxgen Tool](#create-channeltx-and-the-genesis-block-using-the-configtxgen-tool)
        -   [Creating/Modifying  `configtx.yaml`](#creatingmodifying-configtxyaml)
        -   [Executing the configtxgen Tool](#executing-the-configtxgen-tool)
-   [Start the Hyperledger Fabric blockchain network](#start-the-hyperledger-fabric-blockchain-network)
    -   [Modifying the docker-compose yaml Files](#modifying-the-docker-compose-yaml-files)
    -   [Before running docker containers](#before-running-docker-containers)
    -   [Start the docker Containers](#start-the-docker-containers)
    -   [The channel](#the-channel)
        -   [Create the channel](#create-the-channel)
        -   [Join channel](#join-channel)
        -   [Update anchor peers](#update-anchor-peers)
    -   [Prepare chaincode](#prepare-chaincode)
    -   [Install chaincode](#install-chaincode)
    -   [Instantiate chaincode](#instantiate-chaincode)
    -   [Execute tutorial scenario](#execute-tutorial-scenario)
        -   [Query for initial state of the ledger](#query-for-initial-state-of-the-ledger)
        -   [Invoke chaincode](#invoke-chaincode)
        -   [Query for the new values](#query-for-the-new-values)
-   [Summary](#summary)
-   [What is Next?](#what-is-next)
-   [References?](#references)


## [](#recommended-reading)Recommended Reading

Before you start this tutorial, you may want to get familiar with the basic concepts of Hyperledger Fabric. Official Hyperledger Fabric documentation provides a comprehensive source of information related to Hyperledger Fabric configuration, modes of operation and prerequisites. We recommend to read the following articles and use them as the reference when going through this tutorial.

-   Hyperledger Fabric Glossary -  [http://hyperledger-fabric.readthedocs.io/en/latest/glossary.html](http://hyperledger-fabric.readthedocs.io/en/latest/glossary.html)
-   Hyperledger Fabric Model -  [http://hyperledger-fabric.readthedocs.io/en/latest/fabric_model.html](http://hyperledger-fabric.readthedocs.io/en/latest/fabric_model.html)
-   Hyperledger Fabric Prerequisities -  [http://hyperledger-fabric.readthedocs.io/en/latest/prereqs.html](http://hyperledger-fabric.readthedocs.io/en/latest/prereqs.html)
-   Hyperledger Fabric Samples -  [https://github.com/hyperledger/fabric-samples](https://github.com/hyperledger/fabric-samples)
-   Building Your First Network -  [http://hyperledger-fabric.readthedocs.io/en/latest/build_network.html](http://hyperledger-fabric.readthedocs.io/en/latest/build_network.html)


## [](setup-your-environment)Setup Your Environment

### [](#utility-packages)Utility Packages

### [](#docker)Docker

Docker is a tool for deploying, executing, and managing containers. Hyperledger Fabric is by default packaged as a set of Docker images and it is ready to be run as Docker container.

To install the Docker, we can go to  [Docker website](https://docs.docker.com/install/linux/docker-ce/ubuntu/):

**SETUP THE REPOSITORY**

 1. Update the `apt` package index:
	``` 
	$ sudo apt-get update
	``` 
 2. Install packages to allow `apt` to use a repository over HTTPS:
	```
	$ sudo apt-get install \
	    apt-transport-https \
	    ca-certificates \
	    curl \
	    gnupg-agent \
	    software-properties-common
	```
 3. Add Docker’s official GPG key:
	```
	$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
	```
	Verify that you now have the key with the fingerprint `9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88`, by searching for the last 8 characters of the fingerprint.
	```
	$ sudo apt-key fingerprint 0EBFCD88
	    
	    
	pub   rsa4096 2017-02-22 [SCEA]
	      9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88
	uid           [ unknown] Docker Release (CE deb) <docker@docker.com>
	sub   rsa4096 2017-02-22 [S]
	```
 4. Use the following command to set up the  **stable**  repository. 
	 ```
	 $ sudo add-apt-repository \
	    "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
	    $(lsb_release -cs) \
	    stable"
	 ```

**INSTALL DOCKER ENGINE - COMMUNITY**
1.  Update the  `apt`  package index.
    ```
    $ sudo apt-get update
    ```
2.  Install the  _latest version_  of Docker Engine - Community and containerd, or go to the next step to install a specific version:
    ```
    $ sudo apt-get install docker-ce docker-ce-cli containerd.io
    ```
	 Adding your user to the “docker” group
	```
	$ sudo usermod -aG docker $USER
	```
	**After adding docker to current user group, please logout and login again.**
	
### [](#docker-compose)Docker Compose
Docker Compose is a tool for defining and running multi-container Docker applications. This is the case of the Hyperledger Fabric default setup.

Docker Compose is typically installed as a part of your Docker installation. If not, it is necessary to install it separately. Run  `docker-compose --version`  command to find out if Docker Compose is present on your system.

To install Docker Compose on your Ubuntu 16.04 LTS system, please follow the instructions describe below or  [follow the instruction how to install the docker compose in docker website](https://docs.docker.com/compose/install/#install-compose):

 1. Run this command to download the current stable release of Docker Compose:
	```
	$ sudo curl -L "https://github.com/docker/compose/releases/download/1.25.4/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
	```
>
2. Apply executable permissions to the binary:
	```
	$ sudo chmod +x /usr/local/bin/docker-compose
	```
	Check the docker-compose version:
	```
	$ docker-compose --version
	docker-compose version 1.25.4, build 8d51620a
	```
### [](#go-language)Go language

In this tutorial, we use the Go language as the basis of chaincode in Hyperledger Fabric. For Hyperledger Fabric, the Go language version is 1.13.x is required.

To install the Go language in the system, please follow the below instructions:

 1. Download the golang file.
	```
	$ wget https://dl.google.com/go/go1.13.8.linux-amd64.tar.gz
	```
 2. Extract it in home directory.
	```
	$ tar -xvf go1.13.8.linux-amd64.tar.gz
	```
 3. Create a `gopath` directory in **HOME directory**
	```
	$ mkdir $HOME/gopath
	```
	Then we need to set the **Environment Variables** for our Golang in `~/.bashrc` file such `GOPATH`, `GOROOT`, or `GOBIN`.
	```
	$ vim ~/.bashrc
	```
	Inside `~/.bashrc` file set the following commands:
	```
	# set GOPATH and GOROOT
	export GOPATH=$HOME/gopath
	export GOROOT=$HOME/go
	export GOBIN=$HOME/go/bin
	export PATH=$PATH:/$GOROOT/bin
	```
	Then run the command `source ~/.bashrc` to build the environment variables in the **.bashrc** file

### [](nodejs)NodeJS
If you will be developing applications for Hyperledger Fabric leveraging the Hyperledger Fabric SDK for Node.js, version 8 is supported from 8.9.4 and higher. Node.js version 10 is supported from 10.15.3 and higher.
Follow the instructions below to download and install **NodeJS**.
```
$ curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -

$ sudo apt-get install -y nodejs
```

## [](retrieve-artifacts-from-hyperledger-fabric-repositories)Retrieve Artifacts from Hyperledger Fabric Repositories
To download and install  **Hyperledger Fabric binaries**  specific to your platform. This include downloading of  `cryptogen`,  `configtxgen`,  `configtxlator`,  `fabric-ca-client`,  `get-docker-images.sh`,  `orderer`  and  `peer`  tools and placing them into  `bin`  directory in the directory of your choice. Besides, the script will download Hyperlerdger Docker images into your local Docker registry.

Execute the following command to download Hyperledger Fabric binaries and Docker images:

````
curl -sSL https://bit.ly/2ysbOFE | bash -s -- <fabric_version> <fabric-ca_version> <thirdparty_version>

curl -sSL https://bit.ly/2ysbOFE | bash -s -- 2.0.1 1.4.6 0.4.18
````


**RUN**
```
$ curl -sSL https://bit.ly/2ysbOFE | bash -s -- 2.0.1 1.4.6 0.4.18
```

After running the command above, it will show like this:
```
Clone hyperledger/fabric-samples repo

===> Cloning hyperledger/fabric-samples repo and checkout v2.0.1
Cloning into 'fabric-samples'...
remote: Enumerating objects: 4, done.
remote: Counting objects: 100% (4/4), done.
remote: Compressing objects: 100% (4/4), done.
remote: Total 4820 (delta 0), reused 0 (delta 0), pack-reused 4816
Receiving objects: 100% (4820/4820), 1.71 MiB | 456.00 KiB/s, done.
Resolving deltas: 100% (2428/2428), done.
Checking connectivity... done.
error: pathspec 'v2.0.1' did not match any file(s) known to git.

Pull Hyperledger Fabric binaries

===> Downloading version 2.0.1 platform specific fabric binaries
===> Downloading:  https://github.com/hyperledger/fabric/releases/download/v2.0.1/hyperledger-fabric-linux-amd64-2.0.1.tar.gz
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   633  100   633    0     0   1240      0 --:--:-- --:--:-- --:--:--  1241
100 72.7M  100 72.7M    0     0   979k      0  0:01:16  0:01:16 --:--:-- 5113k
==> Done.
===> Downloading version 1.4.6 platform specific fabric-ca-client binary
===> Downloading:  https://github.com/hyperledger/fabric-ca/releases/download/v1.4.6/hyperledger-fabric-ca-linux-amd64-1.4.6.tar.gz
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   636  100   636    0     0   1363      0 --:--:-- --:--:-- --:--:--  1364
100 19.7M  100 19.7M    0     0   811k      0  0:00:24  0:00:24 --:--:-- 2225k
==> Done.

Pull Hyperledger Fabric docker images
.
.
.
===> List out hyperledger docker images
hyperledger/fabric-javaenv     2.0                 bb3837bf990f        12 days ago         505MB
hyperledger/fabric-javaenv     2.0.1               bb3837bf990f        12 days ago         505MB
hyperledger/fabric-javaenv     latest              bb3837bf990f        12 days ago         505MB
hyperledger/fabric-tools       2.0                 5c9a03790913        2 weeks ago         512MB
hyperledger/fabric-tools       2.0.1               5c9a03790913        2 weeks ago         512MB
hyperledger/fabric-tools       latest              5c9a03790913        2 weeks ago         512MB
hyperledger/fabric-peer        2.0                 5c7e5946f3dc        2 weeks ago         57.2MB
hyperledger/fabric-peer        2.0.1               5c7e5946f3dc        2 weeks ago         57.2MB
hyperledger/fabric-peer        latest              5c7e5946f3dc        2 weeks ago         57.2MB
hyperledger/fabric-orderer     2.0                 92bd220edcdd        2 weeks ago         39.7MB
hyperledger/fabric-orderer     2.0.1               92bd220edcdd        2 weeks ago         39.7MB
hyperledger/fabric-orderer     latest              92bd220edcdd        2 weeks ago         39.7MB
hyperledger/fabric-ccenv       2.0                 800087268d9b        2 weeks ago         529MB
hyperledger/fabric-ccenv       2.0.1               800087268d9b        2 weeks ago         529MB
hyperledger/fabric-ccenv       latest              800087268d9b        2 weeks ago         529MB
hyperledger/fabric-baseos      2.0                 74ff718f6f67        2 weeks ago         6.9MB
hyperledger/fabric-baseos      2.0.1               74ff718f6f67        2 weeks ago         6.9MB
hyperledger/fabric-baseos      latest              74ff718f6f67        2 weeks ago         6.9MB
hyperledger/fabric-ca          1.4                 3b96a893c1e4        3 weeks ago         150MB
hyperledger/fabric-ca          1.4.6               3b96a893c1e4        3 weeks ago         150MB
hyperledger/fabric-ca          latest              3b96a893c1e4        3 weeks ago         150MB
hyperledger/fabric-zookeeper   0.4                 ede9389347db        4 months ago        276MB
hyperledger/fabric-zookeeper   0.4.18              ede9389347db        4 months ago        276MB
hyperledger/fabric-zookeeper   latest              ede9389347db        4 months ago        276MB
hyperledger/fabric-kafka       0.4                 caaae0474ef2        4 months ago        270MB
hyperledger/fabric-kafka       0.4.18              caaae0474ef2        4 months ago        270MB
hyperledger/fabric-kafka       latest              caaae0474ef2        4 months ago        270MB
hyperledger/fabric-couchdb     0.4                 d369d4eaa0fd        4 months ago        261MB
hyperledger/fabric-couchdb     0.4.18              d369d4eaa0fd        4 months ago        261MB
hyperledger/fabric-couchdb     latest              d369d4eaa0fd        4 months ago        261MB
```
Then we can see the binary files and shell script file in the bin `~/fabric-samples/bin` directory.

```
blockchain@blockchain-make-doc:~/fabric-samples/bin$ ll
total 206892
drwxr-xr-x  2 blockchain blockchain     4096 Feb 25 22:56 ./
drwxrwxr-x 17 blockchain blockchain     4096 Mar 18 08:07 ../
-rwxr-xr-x  1 blockchain blockchain 20999000 Feb 26 22:05 configtxgen*
-rwxr-xr-x  1 blockchain blockchain 17448272 Feb 26 22:05 configtxlator*
-rwxr-xr-x  1 blockchain blockchain 13344644 Feb 26 22:05 cryptogen*
-rwxr-xr-x  1 blockchain blockchain 19116716 Feb 26 22:05 discover*
-rwxr-xr-x  1 blockchain blockchain 20702242 Feb 25 22:56 fabric-ca-client*
-rwxr-xr-x  1 blockchain blockchain 24603190 Feb 25 22:56 fabric-ca-server*
-rwxr-xr-x  1 blockchain blockchain 12352844 Feb 26 22:05 idemixgen*
-rwxr-xr-x  1 blockchain blockchain 32764776 Feb 26 22:05 orderer*
-rwxr-xr-x  1 blockchain blockchain 50501032 Feb 26 22:05 peer*
```
For your convenience, you can add this directory with Hyperledger Fabric binaries to your **PATH** environment variables `~/.bashrc` file.
```
$ vim ~/.bashrc
```
Inside `~/.bashrc` file set the following commands:
```
# set Hyperledger Fabric
export PATH=$PATH:$HOME/fabric-samples/bin
```
And then run the command `source ~/.bashrc` to rebuild the export **PATH** environment variables.
## Create Hyperledger Fabric Business Network
This tutorial describes creating a business network and deploying chaincode using the Hyperledger Fabric v1.2.0 code base (found here:  [https://github.com/hyperledger/fabric.git](https://github.com/hyperledger/fabric.git)). This tutorial exploits the Hyperledger Fabric v1.2.0 configuration toolset to create the business network consisting of the following items:

-   Three orderer nodes (HRD Center Organization)
-   OrdererType is Kafka (4 Kafka nodes and 3 zookeeper ensembles)
-   Two peerOrganizations (Coocon and Webcash Company)
    -   Coocon company has 2 peers
    -   Webcash company has 2 peers
-   Authentication Data Chaincode / Smart Contracts

At the end of this tutorial, you will have constructed a running instance of Hyperledger Fabric business network, as well as installed, instantiated, and executed chaincode.

For our tutorial we will make use of the Fabric deployment model based on Docker conatiners. Our network will run Docker containers running on our target Ubuntu 16.04 LTS (localhost).

### [](#create-project-directory)Create Project Directory
```
# Project path depends on your requirement
mkdir -p $GOPATH/src/kshrd/KSHRD-BLOCKCHAIN-NETWORK/networks
```
### [](#generate-peer-and-orderer-certificates)Generate Peer and Orderer Certificates

Nodes (such as peers and orderers) are permitted to access business networks using a membership service provider, which is typically in the form of a certificate authority. In this example, we use the development tool named  `cryptogen`  to generate the required certificates. We use a local MSP to store the certs, which are essentially a local directory structure, for each peer and orderer. In production environments, you can exploit the  `fabric ca`  toolset introducing full-featured certificate authorities to generate the certificates.

`crytogen`  tool uses a  `yaml`  configuration file as its configuration - based on the content of this file, the required certificates are generated. We are going to create  `crypto-config.yaml`  file for our configuration. We are going to define two organizations of peers and three orderer organization.

Reference: **Hyperledger Fabric Samples**  [crypto-config.yaml](https://github.com/hyperledger/fabric-samples/blob/master/first-network/crypto-config.yaml)
Create `crypto-config.yaml` file:
```
blockchain@blockchain-make-doc:~/gopath/src/kshrd/KSHRD-BLOCKCHAIN-NETWORK/networks$ vim crypto-config.yaml
```
Here is the listing of our  `crypto-config.yaml`  configuration file (for the purpose of simplicity, all comments are removed from this listing):
```
OrdererOrgs:
  # ---------------------------------------------------------------------------
  # Orderer === KSHRD CENTER
  # ---------------------------------------------------------------------------
  - Name: Orderer
    Domain: kshrd.com.kh
    Specs:
      - Hostname: orderer1
      - Hostname: orderer2
      - Hostname: orderer3
PeerOrgs:
  # ---------------------------------------------------------------------------
  # Coocon Organization
  # ---------------------------------------------------------------------------
  - Name: Coocon
    Domain: coocon.kshrd.com.kh
    Template:
      Count: 2
    Users:
      Count: 1

  # ---------------------------------------------------------------------------
  # Webcash Organization
  # ---------------------------------------------------------------------------
  - Name: Webcash
    Domain: webcash.kshrd.com.kh
    Template:
      Count: 2
    Users:
      Count: 1
```
To generate certificates, run the following command:
```
$ cryptogen generate --config=./crypto-config.yaml
```
After running of crytogen tool you should see the following output in console:
```
blockchain@blockchain-make-doc:~/gopath/src/kshrd/KSHRD-BLOCKCHAIN-NETWORK/networks$ cryptogen generate --config=./crypto-config.yaml
coocon.kshrd.com.kh
webcash.kshrd.com.kh
```
In addition, the new `crypto-config` directory has been created and contains various certificates and keys for **orderers** and **peers**.

First, let's check content under  `orderOrganizations`:
```
blockchain@blockchain-make-doc:~/gopath/src/kshrd/KSHRD-BLOCKCHAIN-NETWORK/networks/crypto-config/ordererOrganizations$ tree
.
└── kshrd.com.kh
    ├── ca
    │   ├── ca.kshrd.com.kh-cert.pem
    │   └── priv_sk
    ├── msp
    │   ├── admincerts
    │   │   └── Admin@kshrd.com.kh-cert.pem
    │   ├── cacerts
    │   │   └── ca.kshrd.com.kh-cert.pem
    │   └── tlscacerts
    │       └── tlsca.kshrd.com.kh-cert.pem
    ├── orderers
    │   ├── orderer1.kshrd.com.kh
    │   │   ├── msp
    │   │   │   ├── admincerts
    │   │   │   │   └── Admin@kshrd.com.kh-cert.pem
    │   │   │   ├── cacerts
    │   │   │   │   └── ca.kshrd.com.kh-cert.pem
    │   │   │   ├── keystore
    │   │   │   │   └── priv_sk
    │   │   │   ├── signcerts
    │   │   │   │   └── orderer1.kshrd.com.kh-cert.pem
    │   │   │   └── tlscacerts
    │   │   │       └── tlsca.kshrd.com.kh-cert.pem
    │   │   └── tls
    │   │       ├── ca.crt
    │   │       ├── server.crt
    │   │       └── server.key
    │   ├── orderer2.kshrd.com.kh
    │   │   ├── msp
    │   │   │   ├── admincerts
    │   │   │   │   └── Admin@kshrd.com.kh-cert.pem
    │   │   │   ├── cacerts
    │   │   │   │   └── ca.kshrd.com.kh-cert.pem
    │   │   │   ├── keystore
    │   │   │   │   └── priv_sk
    │   │   │   ├── signcerts
    │   │   │   │   └── orderer2.kshrd.com.kh-cert.pem
    │   │   │   └── tlscacerts
    │   │   │       └── tlsca.kshrd.com.kh-cert.pem
    │   │   └── tls
    │   │       ├── ca.crt
    │   │       ├── server.crt
    │   │       └── server.key
    │   └── orderer3.kshrd.com.kh
    │       ├── msp
    │       │   ├── admincerts
    │       │   │   └── Admin@kshrd.com.kh-cert.pem
    │       │   ├── cacerts
    │       │   │   └── ca.kshrd.com.kh-cert.pem
    │       │   ├── keystore
    │       │   │   └── priv_sk
    │       │   ├── signcerts
    │       │   │   └── orderer3.kshrd.com.kh-cert.pem
    │       │   └── tlscacerts
    │       │       └── tlsca.kshrd.com.kh-cert.pem
    │       └── tls
    │           ├── ca.crt
    │           ├── server.crt
    │           └── server.key
    ├── tlsca
    │   ├── priv_sk
    │   └── tlsca.kshrd.com.kh-cert.pem
    └── users
        └── Admin@kshrd.com.kh
            ├── msp
            │   ├── admincerts
            │   │   └── Admin@kshrd.com.kh-cert.pem
            │   ├── cacerts
            │   │   └── ca.kshrd.com.kh-cert.pem
            │   ├── keystore
            │   │   └── priv_sk
            │   ├── signcerts
            │   │   └── Admin@kshrd.com.kh-cert.pem
            │   └── tlscacerts
            │       └── tlsca.kshrd.com.kh-cert.pem
            └── tls
                ├── ca.crt
                ├── client.crt
                └── client.key

41 directories, 39 files
```
Second, let's check content under `peerOrganizations`:
```
blockchain@blockchain-make-doc:~/gopath/src/kshrd/KSHRD-BLOCKCHAIN-NETWORK/networks/crypto-config/peerOrganizations$ tree
.
├── coocon.kshrd.com.kh
│   ├── ca
│   │   ├── ca.coocon.kshrd.com.kh-cert.pem
│   │   └── priv_sk
│   ├── msp
│   │   ├── admincerts
│   │   │   └── Admin@coocon.kshrd.com.kh-cert.pem
│   │   ├── cacerts
│   │   │   └── ca.coocon.kshrd.com.kh-cert.pem
│   │   └── tlscacerts
│   │       └── tlsca.coocon.kshrd.com.kh-cert.pem
│   ├── peers
│   │   ├── peer0.coocon.kshrd.com.kh
│   │   │   ├── msp
│   │   │   │   ├── admincerts
│   │   │   │   │   └── Admin@coocon.kshrd.com.kh-cert.pem
│   │   │   │   ├── cacerts
│   │   │   │   │   └── ca.coocon.kshrd.com.kh-cert.pem
│   │   │   │   ├── keystore
│   │   │   │   │   └── priv_sk
│   │   │   │   ├── signcerts
│   │   │   │   │   └── peer0.coocon.kshrd.com.kh-cert.pem
│   │   │   │   └── tlscacerts
│   │   │   │       └── tlsca.coocon.kshrd.com.kh-cert.pem
│   │   │   └── tls
│   │   │       ├── ca.crt
│   │   │       ├── server.crt
│   │   │       └── server.key
│   │   └── peer1.coocon.kshrd.com.kh
│   │       ├── msp
│   │       │   ├── admincerts
│   │       │   │   └── Admin@coocon.kshrd.com.kh-cert.pem
│   │       │   ├── cacerts
│   │       │   │   └── ca.coocon.kshrd.com.kh-cert.pem
│   │       │   ├── keystore
│   │       │   │   └── priv_sk
│   │       │   ├── signcerts
│   │       │   │   └── peer1.coocon.kshrd.com.kh-cert.pem
│   │       │   └── tlscacerts
│   │       │       └── tlsca.coocon.kshrd.com.kh-cert.pem
│   │       └── tls
│   │           ├── ca.crt
│   │           ├── server.crt
│   │           └── server.key
│   ├── tlsca
│   │   ├── priv_sk
│   │   └── tlsca.coocon.kshrd.com.kh-cert.pem
│   └── users
│       ├── Admin@coocon.kshrd.com.kh
│       │   ├── msp
│       │   │   ├── admincerts
│       │   │   │   └── Admin@coocon.kshrd.com.kh-cert.pem
│       │   │   ├── cacerts
│       │   │   │   └── ca.coocon.kshrd.com.kh-cert.pem
│       │   │   ├── keystore
│       │   │   │   └── priv_sk
│       │   │   ├── signcerts
│       │   │   │   └── Admin@coocon.kshrd.com.kh-cert.pem
│       │   │   └── tlscacerts
│       │   │       └── tlsca.coocon.kshrd.com.kh-cert.pem
│       │   └── tls
│       │       ├── ca.crt
│       │       ├── client.crt
│       │       └── client.key
│       └── User1@coocon.kshrd.com.kh
│           ├── msp
│           │   ├── admincerts
│           │   │   └── User1@coocon.kshrd.com.kh-cert.pem
│           │   ├── cacerts
│           │   │   └── ca.coocon.kshrd.com.kh-cert.pem
│           │   ├── keystore
│           │   │   └── priv_sk
│           │   ├── signcerts
│           │   │   └── User1@coocon.kshrd.com.kh-cert.pem
│           │   └── tlscacerts
│           │       └── tlsca.coocon.kshrd.com.kh-cert.pem
│           └── tls
│               ├── ca.crt
│               ├── client.crt
│               └── client.key
└── webcash.kshrd.com.kh
    ├── ca
    │   ├── ca.webcash.kshrd.com.kh-cert.pem
    │   └── priv_sk
    ├── msp
    │   ├── admincerts
    │   │   └── Admin@webcash.kshrd.com.kh-cert.pem
    │   ├── cacerts
    │   │   └── ca.webcash.kshrd.com.kh-cert.pem
    │   └── tlscacerts
    │       └── tlsca.webcash.kshrd.com.kh-cert.pem
    ├── peers
    │   ├── peer0.webcash.kshrd.com.kh
    │   │   ├── msp
    │   │   │   ├── admincerts
    │   │   │   │   └── Admin@webcash.kshrd.com.kh-cert.pem
    │   │   │   ├── cacerts
    │   │   │   │   └── ca.webcash.kshrd.com.kh-cert.pem
    │   │   │   ├── keystore
    │   │   │   │   └── priv_sk
    │   │   │   ├── signcerts
    │   │   │   │   └── peer0.webcash.kshrd.com.kh-cert.pem
    │   │   │   └── tlscacerts
    │   │   │       └── tlsca.webcash.kshrd.com.kh-cert.pem
    │   │   └── tls
    │   │       ├── ca.crt
    │   │       ├── server.crt
    │   │       └── server.key
    │   └── peer1.webcash.kshrd.com.kh
    │       ├── msp
    │       │   ├── admincerts
    │       │   │   └── Admin@webcash.kshrd.com.kh-cert.pem
    │       │   ├── cacerts
    │       │   │   └── ca.webcash.kshrd.com.kh-cert.pem
    │       │   ├── keystore
    │       │   │   └── priv_sk
    │       │   ├── signcerts
    │       │   │   └── peer1.webcash.kshrd.com.kh-cert.pem
    │       │   └── tlscacerts
    │       │       └── tlsca.webcash.kshrd.com.kh-cert.pem
    │       └── tls
    │           ├── ca.crt
    │           ├── server.crt
    │           └── server.key
    ├── tlsca
    │   ├── priv_sk
    │   └── tlsca.webcash.kshrd.com.kh-cert.pem
    └── users
        ├── Admin@webcash.kshrd.com.kh
        │   ├── msp
        │   │   ├── admincerts
        │   │   │   └── Admin@webcash.kshrd.com.kh-cert.pem
        │   │   ├── cacerts
        │   │   │   └── ca.webcash.kshrd.com.kh-cert.pem
        │   │   ├── keystore
        │   │   │   └── priv_sk
        │   │   ├── signcerts
        │   │   │   └── Admin@webcash.kshrd.com.kh-cert.pem
        │   │   └── tlscacerts
        │   │       └── tlsca.webcash.kshrd.com.kh-cert.pem
        │   └── tls
        │       ├── ca.crt
        │       ├── client.crt
        │       └── client.key
        └── User1@webcash.kshrd.com.kh
            ├── msp
            │   ├── admincerts
            │   │   └── User1@webcash.kshrd.com.kh-cert.pem
            │   ├── cacerts
            │   │   └── ca.webcash.kshrd.com.kh-cert.pem
            │   ├── keystore
            │   │   └── priv_sk
            │   ├── signcerts
            │   │   └── User1@webcash.kshrd.com.kh-cert.pem
            │   └── tlscacerts
            │       └── tlsca.webcash.kshrd.com.kh-cert.pem
            └── tls
                ├── ca.crt
                ├── client.crt
                └── client.key

82 directories, 78 files
```
### [](#create-channeltx-and-the-genesis-block-using-the-configtxgen-tool)Create channel.tx and the Genesis Block Using the configtxgen Tool

Now we generated the certificates and keys, we can now configure the  `configtx.yaml`  file. This yaml file serves as input to the  `configtxgen`  tool and generates the following important artifacts such as:

-   **channel.tx**

The channel creation transaction. This transaction lets you create the Hyperledger Fabric channel. The channel is the location where the ledger exists and the mechanism that lets peers join business networks.

-   **Genesis Block**

The Genesis block is the first block in our blockchain. It is used to bootstrap the ordering service and holds the channel configuration.

-   **Anchor peers transactions**

The anchor peer transactions specify each Org's Anchor Peer on this channel for communicating from one organization to other one.

#### [](#creatingmodifying-configtxyaml)Creating/Modifying  `configtx.yaml`

We recommend that you can start with the existing  `configtx.yaml`  in the  `fabric-sample`  project in the github as it contains a template that requires only minor modifications for our needs.

The  `configtx.yaml`  file is broken into several sections:

`Profile`: Profiles describe the organization structure of your network.

`Organization`: The details regarding individual organizations.

`Orderer`: The details regarding the Orderer parameters.

`Application`: Application defaults - not needed for this tutorial.

The following example shows a fully configured  `configtx.yaml`  file (for the purpose of simplicity, all comments are removed from this listing):
